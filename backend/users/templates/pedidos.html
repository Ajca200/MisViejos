{% extends "base_dashboard.html" %}


{% block bootstrap %}<!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
{% endblock %}

{% block content %}

<div class="container-fluid mt-4">
    <h2 class="mb-4">Gesti√≥n de Pedidos</h2>

    <!-- Cards m√©tricas -->
    <div class="row text-white mb-4">
        <div class="col-md-2">
            <div class="card bg-primary shadow-sm">
                <div class="card-body">
                    <h5>Total Pedidos</h5>
                    <h3>150</h3>
                </div>
            </div>
        </div>
        <div class="col-md-2">
            <div class="card bg-warning shadow-sm">
                <div class="card-body">
                    <h5>Pendientes</h5>
                    <h3>20</h3>
                </div>
            </div>
        </div>
        <div class="col-md-2">
            <div class="card bg-info shadow-sm">
                <div class="card-body">
                    <h5>En Proceso</h5>
                    <h3>15</h3>
                </div>
            </div>
        </div>
        <div class="col-md-2">
            <div class="card bg-success shadow-sm">
                <div class="card-body">
                    <h5>Completados</h5>
                    <h3>100</h3>
                </div>
            </div>
        </div>
        <div class="col-md-2">
            <div class="card bg-danger shadow-sm">
                <div class="card-body">
                    <h5>Cancelados</h5>
                    <h3>15</h3>
                </div>
            </div>
        </div>
    </div>

    <!-- Gr√°ficas -->
    <div class="row mb-4">
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-header">Pedidos por Mes</div>
                <div class="card-body">
                    <canvas id="pedidosPorMes"></canvas>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-header">Estado de Pedidos</div>
                <div class="card-body">
                    <canvas id="estadoPedidos"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Tabla de pedidos -->
    <div class="card shadow-sm">
        <div class="card-header">
            <h5>Lista de Pedidos</h5>
        </div>
        <div class="card-body">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th># Pedido</th>
                        <th>Cliente</th>
                        <th>Fecha</th>
                        <th>Total</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>001</td>
                        <td>Juan P√©rez</td>
                        <td>2025-08-01</td>
                        <td>$150</td>
                        <td><span class="badge bg-warning">Pendiente</span></td>
                        <td>
                            <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#detallePedidoModal">üëÅ</button>
                            <button class="btn btn-sm btn-success">‚úè</button>
                            <button class="btn btn-sm btn-danger">‚ùå</button>
                        </td>
                    </tr>
                    <tr>
                        <td>002</td>
                        <td>Mar√≠a L√≥pez</td>
                        <td>2025-08-02</td>
                        <td>$250</td>
                        <td><span class="badge bg-success">Completado</span></td>
                        <td>
                            <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#detallePedidoModal">üëÅ</button>
                            <button class="btn btn-sm btn-success">‚úè</button>
                            <button class="btn btn-sm btn-danger">‚ùå</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

</div>

<!-- Modal Detalle Pedido -->
<div class="modal fade" id="detallePedidoModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
        <div class="modal-header">
            <h5>Detalle del Pedido #001</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
            <p><strong>Cliente:</strong> Juan P√©rez</p>
            <p><strong>Fecha:</strong> 2025-08-01</p>
            <p><strong>M√©todo de Pago:</strong> Tarjeta de Cr√©dito</p>
            <hr>
            <table class="table">
                <thead>
                    <tr>
                        <th>Producto</th>
                        <th>Cantidad</th>
                        <th>Precio Unitario</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Vino Tinto</td>
                        <td>2</td>
                        <td>$50</td>
                        <td>$100</td>
                    </tr>
                    <tr>
                        <td>Cerveza Artesanal</td>
                        <td>5</td>
                        <td>$10</td>
                        <td>$50</td>
                    </tr>
                </tbody>
            </table>
            <h5 class="text-end">Total: $150</h5>
        </div>
    </div>
  </div>
</div>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const menu = document.querySelector('.menu');
    menu.children[2].classList.add('active')

    const ctx1 = document.getElementById('pedidosPorMes');
    new Chart(ctx1, {
        type: 'bar',
        data: {
            labels: ['Ene','Feb','Mar','Abr','May','Jun','Jul','Ago'],
            datasets: [{
                label: 'Pedidos',
                data: [10, 20, 15, 25, 30, 40, 35, 50],
                backgroundColor: 'rgba(54, 162, 235, 0.7)'
            }]
        }
    });

    const ctx2 = document.getElementById('estadoPedidos');
    new Chart(ctx2, {
        type: 'pie',
        data: {
            labels: ['Pendientes', 'En Proceso', 'Completados', 'Cancelados'],
            datasets: [{
                data: [20, 15, 100, 15],
                backgroundColor: ['#ffc107', '#17a2b8', '#28a745', '#dc3545']
            }]
        }
    });
</script>

{% endblock %}
